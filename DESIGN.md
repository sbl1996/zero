# ZERO R 游戏设计总览（V1）

## 核心体验
- 单人回合制刷怪 RPG，玩家在怪物列表与战斗之间循环，提升角色等级、装备与资源管理能力。
- 完整游戏逻辑运行在浏览器端，使用本地存档维持长期进度，适合碎片化刷图。
- 战斗节奏强调“稳扎稳打 + 周期性补给”，死亡附带惩罚但立即复活，鼓励反复挑战以换取成长收益。

## 角色养成与数值基础
### 等级与经验
- **升级需求**：达到等级 `LV` 进入 `LV+1` 需要经验 `NeedExp(LV) = round(100 × 1.18^(LV + 1))`。
- **经验来源**：
  - 击败怪物：获得该怪物 `rewardExp`。
- **升级收益**：
  - 可分配点数 +5。
  - HP/SP/XP 资源上限按当前等级与属性重新计算，并立即回满。
  - 经验条保留溢出。

### 属性与资源
- **基础属性**：ATK、DEF 初始分别为 10/10；通过升级获得的点数进行永久加点。
- **最终属性**：`FinalStat = BaseStat + 装备主属性加成 + 装备副属性加成`。
- **资源上限公式**：
  - `HPmax = 200 + 30 × LV + 装备追加生命`。
  - `SPmax = 115 + 5 × LV`。
  - `XPmax = 35 + 2 × LV`。
- **资源恢复节点**：升级、战败复活均会将 HP/SP/XP 回满。
- **资源消耗与增益**：
  - 消耗型伤害技能命中并造成正伤害时会给 `XP +1`（上限为 `XPmax`）。
  - 每个技能自带资源规则，可能为无消耗、消耗 SP 或消耗 XP；资源不足时技能无法释放。
  - 快捷药剂支持在战斗中即时补给：生命药水回复 `HP +200`，技能药水回复 `SP +50`，必杀药水回复 `XP +100`。

### 初始档案
- 起始等级 1，经验 0。
- 起始资源：500 GOLD、5 瓶生命药水。
- 起始装备：
  - 铁剑
  - 铁甲
  - 铁盔

## 装备系统
- **装备槽位**：头盔、左手盾牌、右手武器、双手武器（与右手武器/左手盾互斥）、铠甲、手套、腰带、戒指、鞋子。
- **主属性强化**：固定值与百分比双轨叠加。
  - 固定加成：`FlatBonus(L) = 0` 当 `L = 0`；`L ≥ 1` 时为 `max(1, round(BaseMain × slotFlatCap × FlatProgress(L)))`。
  - 默认 `slotFlatCap`：武器 25%、盾/铠 18%、头盔/手套/腰带/戒指/鞋子 15%；如需特殊调节，可在装备模板的 `flatCapMultiplier` 字段覆盖。
  - 进度表：`FlatProgress(L)`（1→15）=`[0.07, 0.15, 0.22, 0.30, 0.38, 0.48, 0.58, 0.68, 0.78, 0.86, 0.92, 0.96, 0.98, 0.99, 1.00]`。
  - 百分比加成：`MainBonus(L)`，`L = 1~5` 每级 +1%，`L = 6~10` 额外 +2%/级，`L ≥ 11` 额外 +3%/级，累计叠加。
  - 最终主属性：`FinalMain(L) = round((BaseMain + FlatBonus(L)) × (1 + MainBonus(L)))`。
  - UI 显示格式为“基础值 + 固定值 + 百分比 → 总值”，强化面板额外提示下一等级固定值与百分比的增量。
- **强化成功率（预定规则）**：
  - `L < 5`：成功率 95%，失败无惩罚。
  - `5 ≤ L < 10`：成功率 80%，失败掉级 1。
  - `L ≥ 10`：成功率 50%，失败掉级 2，最低降到10级。

### 强化消耗规则
- **主属性强化消耗**：
  - 等级 0-4：消耗 祝福宝石×1 + 500 GOLD
  - 等级 5-9：消耗 灵魂宝石×1 + 2,000 GOLD
  - 等级 10-14：消耗 奇迹宝石×1 + 10,000 GOLD
  - 失败时已消耗的材料和金币不返还


### 背包换装设计
- **交互入口**：背包界面展示库存装备与当前已穿戴装备。库存装备提供"穿戴"和"丢弃"操作，已穿戴装备提供"卸下"操作。"丢弃"会弹出确认框，确认后永久删除装备。详情面板需展示槽位、主副属性和强化等级等核心信息。
- **逻辑流程**：
  1. 当玩家选择穿戴时，系统根据装备槽位及专属类型（如双手武器）判断与现有装备的冲突关系。
  2. 发生冲突时（例如双手武器与单手武器/盾牌互斥），被挤出的装备会自动退回背包，卸下操作同理。
  3. 换装成功后立即刷新角色属性显示与资源上限，并将最新装备状态写入存档，确保下次登录保持一致。
- **限制条件**：角色等级需满足装备要求；若未来引入背包容量上限，需在卸下或替换前确认有足够空间。
- **反馈表现**：操作结果通过提示条或局部动画反馈，换装过程短暂锁定交互以避免重复输入；列表排序优先呈现已穿戴装备，帮助玩家快速识别当前状态。
- **后续扩展**：换装能力需支持战斗结算奖励或任务奖励触发的自动穿戴流程，并为将来接入特效、属性浮动提示及装备特性事件保留接口。

## 战斗系统细节
### 退出战斗机制
- 在战斗过程中，玩家可以通过以下两种方式退出战斗：
  1. 点击"退出战斗"按钮
  2. 切换到其他页面（如技能、装备、背包等）
- 退出战斗会立即清除当前战斗状态，包括：
  - 重置怪物信息
  - 清除浮动文本和特效
  - 取消自动重赛计时器
  - 重置回合顺序
- 退出战斗不会带来任何惩罚，玩家可以随时安全地离开战斗

### 技能系统
- 战斗界面提供 4 个技能槽位，可在"技能"导航页配置；槽位可重复装备相同技能，但推荐尝试不同战术组合。
- 技能分为无消耗、SP 消耗、XP 消耗三种资源类型；资源不足时技能不可施放。
- 命中造成正伤害的技能会触发基础奖励：`XP +1`。
- **自动连发机制**：玩家按住技能按钮1秒后，技能将每隔200ms自动释放一次，松开鼠标后立刻停止。此功能支持鼠标和触摸操作，并在战斗结束、轮到敌人回合或技能无法使用时自动停止。界面会提供视觉反馈：按住时显示⏱️图标，连发时显示🔄图标和特效。
- 初始技能库：
  | 技能 | 资源 | 描述 + 倍率 |
  |------|------|------|
  | 随手一击 (basic_strike) | 无消耗 | 基础单体斩击，倍率 100%。 |
  | 蓄力劈砍 (charged_cleave) | SP 15 | 蓄力斩击敌人，倍率 115%-135%。 |
  | 命运斩击 (destiny_slash) | XP 30 | 终极爆发斩击，倍率 200%-250%。 |
  | 气息调整 (focus_breath) | 无消耗 | 半倍率斩击并恢复 `SP +10`，倍率 50%。 |
- 所有伤害型技能都会额外乘以隐藏随机倍率 `roll ∈ [0.8, 1.2]`（含必杀），最终结果向下取整。
- 伤害公式：`Damage = max(0, (ATK × 倍率 - DEF_enemy) × roll)`；气息调整先将倍率取 50%，其余逻辑一致。
- 技能数据集中维护为可扩展配置，配合通用执行逻辑，可以后续引入增益、冷却、连携等机制。

### 伤害与减伤

> 目的：消除“ATK×倍率 ≤ DEF 即伤害归零”的硬阈值；让防御收益随提升逐渐递减，同时给攻击方一定的护甲穿透，保证任何对抗都能打出**非零**伤害。

* **结算公式（全局替换）**：

  ```
  raw   = ATK * 技能倍率 * roll                 # roll∈[0.8, 1.2]
  effDEF= max(0, DEF - PenFlat) * (1 - PenPct)  # 穿透：先减后乘
  mitig = 100.0 / (100.0 + effDEF)              # 比例减伤：递减收益
  dmg   = floor(raw * mitig)
  dmg   = max(dmg, minFloor)                    # 伤害地板
  ```
* **默认穿透规则**：

  * **怪物**（攻方）默认具备随等级增长的百分比穿透：

    * `PenPct = clamp(0.10 + 0.012 × monsterLV, 0, 0.60)`

      * 例：LV10≈22%，LV20≈34%，LV30≈46%，LV50≈60%（封顶）。
    * `PenFlat = 0`（常规怪不启用平穿；可留给精英/首领特性使用）。
  * **玩家**（攻方）默认 `PenPct=0, PenFlat=0`，由技能或装备词缀赋予（为后续扩展保留接口）。
* **伤害地板**：`minFloor = max(1, floor(0.04 × 攻方ATK))`，确保低配对高防仍能造成微量伤害，避免极端刮痧。
* **调参建议**：
  * 若总体偏低：提高穿透斜率 `0.012 → 0.014`，或把 `minFloor` 提至 `0.05 × ATK`。
  * 若总体偏高：下调斜率或把 `minFloor` 改为 `0.03 × ATK`。


### 回合结构
1. 进入战斗时玩家先手，战斗状态 `turn = 'player'`。
2. 玩家执行一次行动（释放已装备技能或使用快捷药剂）。
3. 若怪物 HP ≤ 0，判定胜利；否则进入怪物回合。
4. 怪物输出伤害；若玩家 HP ≤ 0，判定失败。
5. 若双方仍存活，回合回到玩家。

### 行动与效果
| 行动 | 资源 | 命中判定 | 主要效果 | 附加说明 |
|------|------|-----------|-----------|-----------|
| 已装备技能 | 依技能类型 | 必定命中 | 详见技能系统表中的倍率与附带效果。 | 命中造成正伤害时 `XP +1` |
| 药剂 | 消耗所选快捷药剂 1 份 | 无 | 立即回复对应资源（HP/SP/XP）。 | 库存不足时无法使用 |

- **浮动文本**：
  - 造成伤害时显示 `-伤害值`，暴击机制尚未实现。
  - 药剂使用会根据资源显示 `+数值`、`SP+数值`、`XP+数值`。
  - 行动失败（药剂无库存、SP 不足、XP 不足等）会在中央显示对应提示。

### 快捷物品栏
- 战斗界面底部常驻 4 个快捷槽，每次点击立即消耗对应药剂并结束当前回合。
- 默认槽位：槽 1 绑定生命药水，其余为空；战斗外可在装备界面调整绑定顺序与药剂类型。
- 槽位显示库存与主要效果，库存耗尽时按钮锁定并提示补充。
- 支持生命/技能/必杀药水，后续若新增药剂按同一机制扩展。

### 胜利与失败
- 胜利：
  - `EXP += rewardExp`、`GOLD += rewardGold`。
  - 解锁下一页怪物（若存在）。
  - 0.8 秒后自动重置同一怪物重新开战，方便连刷。
- 失败：
  - `EXP` 经验槽清零（但不掉等级）。
  - `gold -= floor(gold / 3)`。
  - HP/SP/XP 全部恢复至上限。
  - 退回怪物选择界面。

### RNG 与复盘
- 每场战斗持有一个 32 位整型种子，玩家与怪物回合分别通过线性迭代改变种子，保证同一初始种子下结果可复现。

## 怪物与解锁进度
- 现有怪物 12 名，按页面划分：
  - 第 1 页（LV1~10）：普通怪物 4 名，属性低、奖励少。
  - 第 2 页（LV11~20）：中级怪物 4 名。
  - 第 3 页（LV21~30）：高级怪物 3 名 + 1 名 BOSS（幼龙）。

### 怪物详细数据
| ID | 名称 | LV | HP | ATK | DEF | EXP | GOLD | BOSS | Page |
|---|---:|---:|---:|---:|---:|---:|---:|:---:|---:|
| `slime` | 史莱姆 | 1 | 80 | 12 | 4 | 30 | 25 |  | 1 |
| `wolf` | 野狼 | 4 | 130 | 20 | 8 | 45 | 35 |  | 1 |
| `goblin` | 哥布林 | 6 | 180 | 24 | 12 | 65 | 55 |  | 1 |
| `boar` | 巨型野猪 | 8 | 260 | 31 | 16 | 90 | 70 |  | 1 |
| `golden-sheep` | 黄金绵羊 | 10 | 1000 | 45 | 28 | 400 | 300 | ✔ | 1 |
| `ice-boli` | 冰玻力 | 12 | 460 | 55 | 28 | 160 | 140 |  | 2 |
| `pyro-fox` | 火焰狐 | 14 | 520 | 62 | 24 | 190 | 165 |  | 2 |
| `stone-golem` | 石像巨人 | 17 | 780 | 70 | 48 | 240 | 210 |  | 2 |
| `wind-raptor` | 风暴迅猛龙 | 20 | 1600 | 135 | 50 | 540 | 600 | ✔ | 2 |
| `shade` | 影子刺客 | 22 | 980 | 95 | 45 | 360 | 330 |  | 3 |
| `thunder-knight` | 雷霆骑士 | 25 | 1200 | 118 | 62 | 480 | 420 |  | 3 |
| `abyss-witch` | 深渊女巫 | 28 | 1350 | 140 | 55 | 540 | 500 |  | 3 |
| `dragon-whelp` | 幼龙 | 30 | 2200 | 170 | 72 | 660 | 610 | ✔ | 3 |
| `m-specter` | 沼泽魅影 Specter | 31 | 1622 | 139 | 49 | 441 | 378 |  | 4 |
| `m-rockback` | 岩背巨兽 Rockback | 32 | 1682 | 143 | 50 | 456 | 391 |  | 4 |
| `m-raven` | 血鸦 Blood Raven | 34 | 1785 | 151 | 53 | 483 | 415 |  | 4 |
| `boss-treant` | 腐沼树妖 Bog-Treant | 35 | 2676 | 182 | 65 | 622 | 535 | ✔ | 4 |
| `m-nightstalker` | 夜巡狼人 Nightstalker | 36 | 1906 | 159 | 55 | 513 | 441 |  | 5 |
| `m-troll` | 寒霜巨魔 Frost Troll | 37 | 1967 | 163 | 57 | 529 | 454 |  | 5 |
| `m-hound` | 熔岩猎犬 Lava Hound | 39 | 2070 | 171 | 59 | 556 | 477 |  | 5 |
| `boss-priest` | 暗影祭司 Shadow Priest | 40 | 3088 | 206 | 74 | 713 | 612 | ✔ | 5 |
| `m-harvester` | 骨响收割者 Bone Harvester | 41 | 2190 | 179 | 62 | 586 | 503 |  | 6 |
| `m-sentinel` | 符文哨兵 Rune Sentinel | 42 | 2233 | 183 | 63 | 598 | 513 |  | 6 |
| `m-reaver` | 虚空撕裂者 Void Reaver | 44 | 2354 | 191 | 66 | 628 | 540 |  | 6 |
| `boss-archmage` | 堕落大法师 Fallen Archmage | 45 | 3500 | 230 | 81 | 803 | 690 | ✔ | 6 |
| `m-stormcaller` | 风暴召唤者 Stormcaller | 46 | 2457 | 199 | 68 | 655 | 563 |  | 7 |
| `m-colossus` | 黑曜巨像 Obsidian Colossus | 47 | 2517 | 203 | 70 | 670 | 576 |  | 7 |
| `m-titan` | 焰生泰坦 Flameborn Titan | 49 | 2638 | 211 | 72 | 700 | 602 |  | 7 |
| `boss-knight` | 恐惧骑士 Dread Knight | 50 | 3887 | 253 | 90 | 891 | 765 | ✔ | 7 |
| `m-chimera` | 秘能奇美拉 Arcane Chimera | 51 | 2741 | 219 | 75 | 727 | 625 |  | 8 |
| `m-wyrm` | 冰霜飞龙 Frost Wyrm | 52 | 2801 | 223 | 76 | 742 | 638 |  | 8 |
| `m-kraken` | 深海巨妖 Abyss Kraken | 54 | 2922 | 231 | 79 | 773 | 664 |  | 8 |
| `boss-warlord` | 地狱军阀 Infernal Warlord | 55 | 4299 | 277 | 97 | 981 | 842 | ✔ | 8 |
| `m-templar` | 天穹圣卫 Celestial Templar | 56 | 3025 | 239 | 81 | 800 | 687 |  | 9 |
| `m-banshee` | 灰烬魅灵 Ashen Banshee | 57 | 3086 | 243 | 82 | 815 | 700 |  | 9 |
| `m-hunter` | 苍穹狩魔者 Skyscour Hunter | 59 | 3207 | 251 | 85 | 845 | 727 |  | 9 |
| `boss-dragon` | 远古龙王 Ancient Dragon | 60 | 4600 | 300 | 104 | 1075 | 923 | ✔ | 9 |

- 每只怪物定义字段：`id`、`name`、`lv`、`hpMax`、`atk`、`def`、`rewardExp`、`rewardGold`、`page`，可选 `portrait` 与 `isBoss`。
- 解锁逻辑：默认第一页开放；击败任意一只当前最高页怪物会解锁下一页；BOSS 标记仅用于展示。

## 道具、材料与经济系统
### 背包系统
- 背包为全局存储，所有道具、药剂、装备、宝石都会进入同一背包列表。
- 背包结构包含两类数据：可堆叠道具（药剂、材料、宝石）以 `itemId + quantity` 表示，非堆叠道具（装备、唯一奖励）以唯一 ID 记录完整属性。
- 默认容量无限；后续若增加负重/容量限制，可在存档版本升级时扩展字段。
- 顶部导航新增"背包"页面，支持按道具类型过滤、排序（按类型 → 装备状态 → 等级排序）。
- 支持从背包快速将药剂绑定至战斗快捷栏；强化界面、商店购买、战利品掉落均直接写入背包。
- 背包列表实时同步存档，按类型 → 等级/名称排序，支持默认空背包并随游戏进度自动填充。
- **消耗品使用**：背包内的消耗品（生命药水、技能药水、必杀药水）可在非战斗状态下直接使用，立即回复对应资源。
  - 使用时会检查当前状态是否需要回复，若已满则提示"状态已满，无需使用"并返还道具。
  - 使用按钮会在相应资源已满时禁用，避免无效操作。
  - 使用过程有1秒的操作锁定时间，防止重复点击。
  - 成功使用后显示"已使用 [物品名称]"的确认提示。

### 道具列表
| ID | 名称 | 功能 | 单价 (GOLD) |
|----|------|------|--------------|
| potionHP | 生命药水 | 战斗中回复 200 HP | 50 |
| potionSP | 技能药水 | 战斗中回复 50 SP | 120 |
| potionXP | 必杀药水 | 战斗中回复 100 XP | 240 |
| blessGem | 祝福宝石 | 装备 1~5 级强化素材 | 1000 |
| soulGem | 灵魂宝石 | 装备 6~10 级强化素材 | 2000 |
| miracleGem | 奇迹宝石 | 装备 11~15 级强化素材 | 5000 |

### 装备模板定价
| 槽位 | id | 英文名称 | 等级需求 | 主属性 | 副属性 | 价格(GOLD) | flatCapMultiplier |
|---|---|---|---:|---|---|---:|---:|
| 右手武器 | iron-sword | 铁剑 | 1 | ATK 25 | +3 ATK | 300 | 0.25 |
| 双手武器 | iron-maul | 铁锤 | 1 | ATK 45 | +4 ATK | 500 | 0.25 |
| 左手盾 | iron-shield | 铁盾 | 1 | DEF 10 | +2 DEF | 250 | 0.18 |
| 铠甲 | iron-plate | 铁甲 | 1 | DEF 15 | +2 DEF, +20 HP | 400 | 0.18 |
| 头盔 | iron-helm | 铁盔 | 1 | DEF 8 | +1 DEF | 200 | 0.15 |
| 手套 | iron-gloves | 铁手套 | 1 | DEF 5 | +1 DEF | 150 | 0.15 |
| 腰带 | leather-belt | 皮带 | 1 | DEF 6 | +1 DEF | 180 | 0.15 |
| 戒指 | iron-ring | 铁戒指 | 1 | HP 30 | +5 HP | 220 | 0.15 |
| 鞋子 | iron-boots | 铁靴 | 1 | DEF 7 | +1 DEF | 200 | 0.15 |
| 右手武器 | steel-blade | 钢刃 | 10 | ATK 40 | +3 ATK | 600 | 0.25 |
| 双手武器 | steel-greatsword | 巨型钢剑 | 10 | ATK 72 | +4 ATK | 1000 | 0.25 |
| 左手盾 | steel-bulwark | 钢盾 | 10 | DEF 16 | +2 DEF | 500 | 0.18 |
| 铠甲 | steel-cuirass | 钢甲 | 10 | DEF 24 | +2 DEF, +20 HP | 800 | 0.18 |
| 头盔 | steel-helm | 钢盔 | 10 | DEF 13 | +1 DEF | 400 | 0.15 |
| 手套 | steel-gauntlets | 钢护手 | 10 | DEF 8 | +1 DEF | 300 | 0.15 |
| 腰带 | studded-belt | 铆钉腰带 | 10 | DEF 10 | +1 DEF | 360 | 0.15 |
| 戒指 | amber-ring | 琥珀戒 | 10 | HP 48 | +5 HP | 440 | 0.15 |
| 鞋子 | steel-greaves | 钢靴 | 10 | DEF 11 | +1 DEF | 400 | 0.15 |
| 右手武器 | knight-blade | 骑士刃 | 20 | ATK 55 | +3 ATK | 1050 | 0.25 |
| 双手武器 | knight-warhammer | 骑士战锤 | 20 | ATK 99 | +4 ATK | 1750 | 0.25 |
| 左手盾 | knight-tower-shield | 骑士塔盾 | 20 | DEF 22 | +2 DEF | 875 | 0.18 |
| 铠甲 | knight-armor | 骑士甲 | 20 | DEF 33 | +2 DEF, +20 HP | 1400 | 0.18 |
| 头盔 | knight-helm | 骑士盔 | 20 | DEF 18 | +1 DEF | 700 | 0.15 |
| 手套 | knight-gauntlets | 骑士护手 | 20 | DEF 11 | +1 DEF | 525 | 0.15 |
| 腰带 | reinforced-belt | 加固腰带 | 20 | DEF 13 | +1 DEF | 630 | 0.15 |
| 戒指 | ruby-ring | 红玉戒 | 20 | HP 66 | +5 HP | 770 | 0.15 |
| 鞋子 | knight-sabatons | 骑士胫甲 | 20 | DEF 15 | +1 DEF | 700 | 0.15 |
| 右手武器 | mithril-saber | 秘银军刀 | 30 | ATK 78 | +3 ATK | 1800 | 0.25 |
| 双手武器 | mithril-claymore | 秘银巨剑 | 30 | ATK 140 | +4 ATK | 3000 | 0.25 |
| 左手盾 | mithril-aegis | 秘银盾 | 30 | DEF 31 | +2 DEF | 1500 | 0.18 |
| 铠甲 | mithril-hauberk | 秘银甲 | 30 | DEF 46 | +2 DEF, +20 HP | 2400 | 0.18 |
| 头盔 | mithril-coif | 秘银盔 | 30 | DEF 25 | +1 DEF | 1200 | 0.15 |
| 手套 | mithril-gloves | 秘银护手 | 30 | DEF 16 | +1 DEF | 900 | 0.15 |
| 腰带 | silverweave-belt | 银纹腰带 | 30 | DEF 19 | +1 DEF | 1080 | 0.15 |
| 戒指 | sapphire-ring | 蓝宝石戒 | 30 | HP 93 | +5 HP | 1320 | 0.15 |
| 鞋子 | mithril-boots | 秘银长靴 | 30 | DEF 22 | +1 DEF | 1200 | 0.15 |
| 右手武器 | runed-edge | 符文之锋 | 40 | ATK 105 | +3 ATK | 2700 | 0.25 |
| 双手武器 | runed-greataxe | 符文巨斧 | 40 | ATK 189 | +4 ATK | 4500 | 0.25 |
| 左手盾 | runed-bulwark | 符文壁垒 | 40 | DEF 42 | +2 DEF | 2250 | 0.18 |
| 铠甲 | runed-cuirass | 符文甲 | 40 | DEF 63 | +2 DEF, +20 HP | 3600 | 0.18 |
| 头盔 | runed-helm | 符文头盔 | 40 | DEF 34 | +1 DEF | 1800 | 0.15 |
| 手套 | runed-gauntlets | 符文护手 | 40 | DEF 21 | +1 DEF | 1350 | 0.15 |
| 腰带 | glyph-belt | 符纹腰带 | 40 | DEF 25 | +1 DEF | 1620 | 0.15 |
| 戒指 | topaz-ring | 黄玉戒 | 40 | HP 126 | +5 HP | 1980 | 0.15 |
| 鞋子 | runed-greaves | 符文胫甲 | 40 | DEF 29 | +1 DEF | 1800 | 0.15 |
| 右手武器 | dragonbone-fang | 龙骨之牙 | 50 | ATK 130 | +3 ATK | 3900 | 0.25 |
| 双手武器 | dragonslayer | 屠龙者 | 50 | ATK 234 | +4 ATK | 6500 | 0.25 |
| 左手盾 | dragonbone-shield | 龙骨盾 | 50 | DEF 52 | +2 DEF | 3250 | 0.18 |
| 铠甲 | dragonscale-armor | 龙鳞甲 | 50 | DEF 78 | +2 DEF, +20 HP | 5200 | 0.18 |
| 头盔 | dragonbone-helm | 龙骨盔 | 50 | DEF 42 | +1 DEF | 2600 | 0.15 |
| 手套 | dragonbone-gauntlets | 龙骨护手 | 50 | DEF 26 | +1 DEF | 1950 | 0.15 |
| 腰带 | dragonscribed-belt | 龙纹腰带 | 50 | DEF 31 | +1 DEF | 2340 | 0.15 |
| 戒指 | emerald-ring | 祖母绿戒 | 50 | HP 156 | +5 HP | 2860 | 0.15 |
| 鞋子 | dragonscale-boots | 龙鳞靴 | 50 | DEF 36 | +1 DEF | 2600 | 0.15 |
| 右手武器 | radiant-sword | 辟光剑 | 60 | ATK 160 | +3 ATK | 5400 | 0.25 |
| 双手武器 | starbreaker | 碎星者 | 60 | ATK 288 | +4 ATK | 9000 | 0.25 |
| 左手盾 | celestial-bulwark | 天穹壁垒 | 60 | DEF 64 | +2 DEF | 4500 | 0.18 |
| 铠甲 | starlit-plate | 星辉甲 | 60 | DEF 96 | +2 DEF, +20 HP | 7200 | 0.18 |
| 头盔 | starcrest | 星冕 | 60 | DEF 51 | +1 DEF | 3600 | 0.15 |
| 手套 | starlit-gauntlets | 星辉护手 | 60 | DEF 32 | +1 DEF | 2700 | 0.15 |
| 腰带 | starwoven-belt | 星纹腰带 | 60 | DEF 38 | +1 DEF | 3240 | 0.15 |
| 戒指 | morningstar-ring | 晨星戒 | 60 | HP 192 | +5 HP | 3960 | 0.15 |
| 鞋子 | starlit-boots | 星辉长靴 | 60 | DEF 45 | +1 DEF | 3600 | 0.15 |

- 购买装备会生成唯一 ID 的强化等级 0 装备并存入背包。

## 物品掉落系统
- 击败怪物后，除了获得经验值与经验奖励外，还有概率掉落物品
  - 普通怪有30%概率掉落1件物品（剩下70%概率不掉落物品），具体掉落物品分布见掉落表。
  - BOSS有60%的概率掉落1件物品，30%的概率掉落2件物品，10%的概率掉落3件物品。
  - 掉落的每件物品类型按掉落表里的概率独立随机采样。
  - 掉落的装备为每个部位概率相同，均匀分布。

### 掉落表（按等级段的通用池）

| 等级段 | 普通怪掉落 | BOSS 掉落 | 备注 |
|---:|---|---|---|
| 1–10 | 药水(HP 60%, SP 20%, XP 5%)；Iron 装备 10%；祝福宝石 5% | Iron 装备 40%；祝福宝石 35%；金币x2；小概率 Steel 装备(5%) | 首段掉落保守，鼓励入门强化 |
| 11–20 | 药水(HP 50%, SP 25%, XP 10%)；Steel 装备 12%；祝福 8%；灵魂 5% | Steel 装备 45%；灵魂 30%；金币x2；小概率 Knight 装备(6%) | BOSS 开始稳定给下一层边角料 |
| 21–30 | 药水(HP 45%, SP 25%, XP 12%)；Knight 装备 14%；灵魂 9%；奇迹 4% | Knight 装备 48%；奇迹 28%；金币x2；小概率 Mithril 装备(7%) | 逐渐过渡到奇迹宝石 |
| 31–40 | 药水(HP 40%, SP 25%, XP 15%)；Mithril 装备 15%；奇迹 10% | Mithril 装备 50%；奇迹 30%；金币x2；小概率 Rune 装备(8%) | 强化资源进入奇迹阶段 |
| 41–50 | 药水(HP 35%, SP 25%, XP 18%)；Rune 装备 16%；奇迹 10% | Rune 装备 52%；奇迹 30%；金币x2；小概率 Dragon 装备(9%) | XP 药水占比提高 |
| 51–59 | 药水(HP 30%, SP 25%, XP 20%)；Dragon 装备 17%；奇迹 10% | Dragon 装备 55%；奇迹 30%；金币x2；小概率 Celestial 装备(10%) | 装备成长显著，注意金币通胀 |
| 60 | 药水(HP 25%, SP 25%, XP 25%)；Celestial 装备 18%；奇迹 12% | Celestial 装备 60%；奇迹 30%；金币x3 | 终局循环，支持毕业强化 |


## 存档与会话管理
- 启动时从 `localStorage` 读取 `zero.save`：
  - 校验 `version === 2`，否则忽略旧档并创建默认角色。
  - 恢复玩家属性、道具库存、装备列表、怪物解锁状态。
- 游戏内任何变化（资源、装备、解锁）都会触发深度监听写回存档。
- 提供重置逻辑以便未来扩展“新档”或“清档”功能。

## 界面结构
- 顶部导航：怪物列表 / 战斗 / 技能 / 装备 / 背包 / 商店。
- **怪物列表**：
  - 左侧 `PlayerStatusPanel` 展示角色资源、属性、道具数量；若有未分配点数可打开属性分配弹窗。
  - 右侧分页卡片展示怪物属性、奖励与 BOSS 标记。
- **战斗界面**：
  - 左侧保留状态与资源条，中部展示玩家/怪物立绘与浮动数字。
  - 右上角面板显示怪物详细数值与 HP 条。
  - 底部四个技能按钮展示已装备技能名称与资源消耗，右下角显示当前回合顺序。
- **技能**：技能列表与详情页展示已掌握技能的描述、资源类型，可为 4 个战斗槽位设置技能；提供快速装备至空槽的交互。
- **装备**：信息浏览/预览页面，为后续可交互系统预留布局。
- **背包**：卡片式网格展示所有堆叠道具与备用装备，内置类型筛选，便于战斗快捷栏与强化界面快速查阅库存。消耗品提供"使用"按钮，可在非战斗状态下直接回复对应资源。
- **商店**：标签页式物品列表，卡片展示描述、价格与购买按钮。

## 已知缺口与规划建议
1. **战斗扩展**：暂无状态异常、技能冷却、掉落表等机制，后续可考虑在现有 RNG 架构上增加元素以提升策略深度。
